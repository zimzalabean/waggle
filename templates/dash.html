{% extends "base-bs.html" %}
      
{% block main_content %}

<div class="container-xxl flex-grow-1 container-p-y">
       <!-- Tabs -->
      <div class="row">
        <div class="col-xl-12">
            <h5 class="fw-bold mb-2 col-12">Mod queue:
                <span class="badge">
                    <div class="dropdown col-6">
                        <button class="btn btn-secondary rounded-pill dropdown-toggle" type="button" id="dropdownMenu" data-bs-toggle="dropdown" aria-expanded="false">
                        Choose Gaggle
                        </button>
                        <ul class="dropdown-menu" aria-labelledby="dropdownMenu2">
                        {% for gaggle in modgaggles %}
                        <li><a class="dropdown-item" href="{{url_for(getModqueue, gaggle_name = gaggle.gaggle_name)}}">{{gaggle.gaggle_name}}</a></li>
                        {%endfor%}
                        </ul>
                    </div>
                </span>
                
            </h5>




        </div>
    </div>
</div>

  

<script>
    function getQueue(gaggle_id, gaggle_name) {
        console.log(gaggle_id);
        $("#dropdownMenu").text(gaggle_name);
        $.ajax({
                type: "GET",
                url: "/modqueue/get",
                data: {'gaggle_id': gaggle_id},
                success: function(resp){
                  $('#queue').empty('');
                  var queue = resp['queue']
                  $('#queue').append(queue);
                }
            });  event.preventDefault();
    } 

    function respond(gaggle_id, resp) {
      let li = document.getElementById('invite-'+gaggle_id);
      li.parentNode.removeChild(li);
      $.ajax({
                type: "POST",
                url: "/invitation/",
                data: JSON.stringify({'gaggle_id': gaggle_id, 'resp': resp}),
                contentType: 'application/json; charset=utf-8',
                dataType: 'json',
                async: true,
                success: function(resp){
                
                }
            });  event.preventDefault();
    } 

    function ban() {
        console.log(gaggle_id);
        var form_data = new FormData();
        var content = $('textarea#username').val();
        var content = $('textarea#gaggle_id').val();
        var content = $('textarea#content').val();
        var content = $('textarea#content').val();
        form_data.append('username', username);
        form_data.append('gaggle_id', gaggle_id);
        form_data.append('reason', reason);
        form_data.append('period', period);
        $.ajax({
                type: "POST",
                url: "/ban/",
                data: form_data,
                contentType: false,
                cache: false,
                processData: false,
                dataType: 'json',
                async: true,
                success: function(resp){

                }
            });  event.preventDefault();
    }    



</script>

{% endblock %}
